(function(e){function t(t){for(var a,o,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)o=s[d],i[o]&&p.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,s=1;s<r.length;s++){var c=r[s];0!==i[c]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},i={app:0},n=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},1082:function(e,t,r){"use strict";var a=r("fd33"),i=r.n(a);i.a},"266a":function(e,t,r){"use strict";var a=r("f270"),i=r.n(a);i.a},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var a=r("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("form",{staticStyle:{display:"flex","flex-direction":"column","align-items":"stretch",margin:"0 auto",width:"50%"},attrs:{autocomplete:"off",novalidate:""},on:{submit:function(e){e.preventDefault()}}},[r("label",{attrs:{for:"departure_code"}},[e._v("departure_code")]),r("input",{directives:[{name:"model",rawName:"v-model",value:this.initSearch.directions[0].departure_code,expression:"this.initSearch.directions[0].departure_code"}],attrs:{type:"text",name:"departure_code",id:"departure_code"},domProps:{value:this.initSearch.directions[0].departure_code},on:{input:function(t){t.target.composing||e.$set(this.initSearch.directions[0],"departure_code",t.target.value)}}}),r("label",{attrs:{for:"arrival_code"}},[e._v("arrival_code")]),r("input",{directives:[{name:"model",rawName:"v-model",value:this.initSearch.directions[0].arrival_code,expression:"this.initSearch.directions[0].arrival_code"}],attrs:{type:"text",name:"arrival_code",id:"arrival_code"},domProps:{value:this.initSearch.directions[0].arrival_code},on:{input:function(t){t.target.composing||e.$set(this.initSearch.directions[0],"arrival_code",t.target.value)}}}),r("label",{attrs:{for:"date"}},[e._v("date")]),r("input",{directives:[{name:"model",rawName:"v-model",value:this.initSearch.directions[0].date,expression:"this.initSearch.directions[0].date"}],attrs:{type:"date",name:"date",id:"date"},domProps:{value:this.initSearch.directions[0].date},on:{input:function(t){t.target.composing||e.$set(this.initSearch.directions[0],"date",t.target.value)}}}),r("label",{attrs:{for:"class"}},[e._v("class")]),r("input",{directives:[{name:"model",rawName:"v-model",value:this.initSearch.class,expression:"this.initSearch.class"}],attrs:{type:"text",name:"class",id:"class"},domProps:{value:this.initSearch.class},on:{input:function(t){t.target.composing||e.$set(this.initSearch,"class",t.target.value)}}}),this.authApp.etm_auth_key?r("button",{on:{click:e.postInitSearch}},[e._v("getInitSearch")]):e._e()]),r("Offers",{attrs:{"display-details":e.displayDetails,display_details:e.display_details,offers:e.offers}})],1)},n=[],o=r("bc3a"),s=r.n(o),c="https://api-stage.etm-system.com/api",l="https://api-stage.etm-system.com/api/air",u=s.a.create({baseURL:"".concat(l)}),d="94cb849d0a",p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",e._l(e.offers.offers,function(t,a){return r("li",{key:a,on:{click:e.displayDetails}},[r("img",{attrs:{src:t.carrier_logo,alt:"carrier logo",width:"100"}}),r("span",[e._v(e._s(t.carrier_name))]),r("detailOffer",{style:{display:e.display_details},attrs:{offer:t}})],1)}))},f=[],_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",e._l(e.offer.offers,function(t){return r("li",{staticClass:"detail"},[r("ul",e._l(t.segments,function(t){return r("li",[r("ul",[e._l(t.flights_info,function(a){return r("ul",[r("li",[e._v("date departure: "+e._s(a.date))]),r("li",[e._v("date arrival: "+e._s(e.calcDateArrival(a.date,a.departure_local_time,a.departure_timezone,t.duration_minutes))+"\n                        ")]),r("li",[e._v("departure airport: "+e._s(a.departure_airport))]),r("li",[e._v("arrival airport: "+e._s(a.arrival_airport))]),r("li",[e._v("duration: "+e._s(a.duration_formated))])])}),r("li",[e._v("price: "+e._s(t.price))])],2)])}))])}))},m=[];function h(e){return e<10&&(e="0".concat(e)),e}var v={name:"detailOffer",props:{offer:{}},data:function(){return{}},methods:{calcDateArrival:function(e,t,r,a){var i=new Date("".concat(e," ").concat(t," ").concat(r)),n=new Date(i.setMinutes(i.getMinutes()+a)),o=n.getFullYear(),s=h(n.getDate()),c=h(n.getMonth()+1);return"".concat(o,"-").concat(c,"-").concat(s)}}},g=v,y=(r("1082"),r("2877")),b=Object(y["a"])(g,_,m,!1,null,"7c8c361a",null);b.options.__file="DetailOffer.vue";var S=b.exports,O={name:"Offers",components:{DetailOffer:S},props:{displayDetails:{},display_details:{},offers:{}}},w=O,x=(r("266a"),Object(y["a"])(w,p,f,!1,null,null,null));x.options.__file="Offers.vue";var D=x.exports,U={name:"app",components:{Offers:D},data:function(){return{display_details:"none",authApp:{etm_auth_key:"string",locale:"string",currency:"string",max_expiry_time:0,max_timeout:0},initSearch:{directions:[{departure_code:"MOW",arrival_code:"LED",date:"2018-12-21",time:"M"}],adult_qnt:1,child_qnt:0,infant_qnt:0,passenger_category:"ADT",class:"E",direct:!0,flexible:!0,max_price:50,airlines:["SU","HR"],fare_types:["PUB","NEG"]},searchRequest:{status:"ok",message:"Нет ошибок",request_id:0},offers:{status:"inProcess",message:"Нет ошибок",is_round:!0,is_multy:!1,currency:"RUB",available_currencies:["EUR","RUB"],sort:"price",directions:[{dir_number:1,date:"2018-04-28",departure_code:"MOW",departure_name:"Москва",departure_country:"RU",arrival_code:"LED",arrival_name:"Санкт-Петербург",arrival_country:"RU"}],offers:[{carrier_code:"SU",carrier_name:"Аэрофлот",carrier_logo:"https://crm.etm-system.com/images/airline/SU.png",min_price:5320,offers:[{min_price:5320,segments:[{segment_id:881516214,buy_id:"839493372_881516214",dir_number:1,flight_number:"205",flight_carrier_code:"SU",flight_carrier_name:"Аэрофлот",departure_airport:"VKO",departure_timestamp:1524888600,arrival_airport:"LED",arrival_timestamp:1524888600,duration_formated:"1 ч 20 мин",duration_minutes:80,stops:0,flights_info:[{date:"2018-04-28",departure_country:"RU",departure_city:"Москва",departure_airport:"VKO",departure_terminal:"string",departure_local_time:"08:20",departure_timezone:"GMT+03:00",arrival_country:"RU",arrival_city:"Санкт-Перебург",arrival_airport:"LED",arrival_terminal:"string",arrival_local_time:"09:40",arrival_timezone:"GMT+03:00",flight_number_print:"SU-205",duration_formated:"1 ч 20 мин",stop_time:"9 ч 40 мин"}],tarif:"NVUR",class:"N",price:6975,baggage:"1PC"}]}]}]}}},mounted:function(){this.getTokenApp()},methods:{displayDetails:function(){this.display_details="none"===this.display_details?"block":"none"},getTokenApp:function(){var e=this;s.a.get("".concat(c,"/login/").concat(d)).then(function(t){e.authApp=t.data,u.defaults.headers.common["Authorization"]=e.authApp.etm_auth_key}).catch(function(e){window.console.log(e)})},postInitSearch:function(){var e=this;u.post("/search",this.initSearch).then(function(t){e.searchRequest=t.data,e.getOffers()}).catch(function(e){window.console.log(e)})},getOffers:function(){var e=this;u.get("/offers/".concat(this.searchRequest.request_id)).then(function(t){e.offers=t.data}).catch(function(e){window.console.log(e)})}}},k=U,P=Object(y["a"])(k,i,n,!1,null,null,null);P.options.__file="App.vue";var R=P.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(R)}}).$mount("#app")},f270:function(e,t,r){},fd33:function(e,t,r){}});